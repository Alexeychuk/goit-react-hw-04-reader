{"version":3,"sources":["components/Reader/Controls/Controls.module.css","components/Reader/Reader.module.css","components/Reader/Publication/Publication.module.css","components/Reader/Counter/Counter.module.css","components/Reader/Publication/Publication.js","components/Reader/Counter/Counter.js","components/Reader/Controls/Controls.js","components/Reader/Reader.js","components/App/index.jsx","index.js"],"names":["module","exports","Publication","publication","title","text","className","styles","Counter","currentPage","length","counter","Controls","handlePage","controls","type","name","button","onClick","disabled","Reader","state","item","checkValidItem","query","data","setState","find","props","location","history","replace","search","pathname","handleItemChange","e","redirect","push","target","prevState","this","Number","queryString","parse","prevProps","prevItem","reader","to","render","Component","withRouter","App","ReactDOM","basename","component","document","getElementById"],"mappings":"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","file":"static/js/main.e317234b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"controls\":\"Controls_controls__139MM\",\"button\":\"Controls_button__2zXfW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"reader\":\"Reader_reader__2bTCi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"publication\":\"Publication_publication__3mMPE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"counter\":\"Counter_counter__JO3Fs\"};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './Publication.module.css';\n\nconst Publication = ({ publication: { title, text } }) => {\n  return (\n    <div>\n      <article className={styles.publication}>\n        <h2>{title}</h2>\n        <p>{text}</p>\n      </article>\n    </div>\n  );\n};\n\nPublication.propTypes = {\n  publication: PropTypes.shape({\n    title: PropTypes.string,\n    text: PropTypes.string,\n  }).isRequired,\n};\n\nexport default Publication;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Counter.module.css';\n\nconst Counter = ({ currentPage, length }) => {\n  return (\n    <p className={styles.counter}>\n      {currentPage}/{length}\n    </p>\n  );\n};\n\nCounter.propTypes = {\n  currentPage: PropTypes.number.isRequired,\n  length: PropTypes.number.isRequired,\n};\n\nexport default Counter;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Controls.module.css';\n\nconst Controls = ({ handlePage, length, currentPage }) => {\n  return (\n    <section className={styles.controls}>\n      <button\n        type=\"button\"\n        name=\"decrease\"\n        className={styles.button}\n        onClick={handlePage}\n        disabled={currentPage === 1}\n      >\n        Назад\n      </button>\n      <button\n        type=\"button\"\n        name=\"increase\"\n        className={styles.button}\n        onClick={handlePage}\n        disabled={currentPage === length}\n      >\n        Вперед\n      </button>\n    </section>\n  );\n};\n\nControls.propTypes = {\n  handlePage: PropTypes.func.isRequired,\n  length: PropTypes.number.isRequired,\n  currentPage: PropTypes.number.isRequired,\n};\n\nexport default Controls;\n","import React, { Component } from 'react';\nimport { Route, withRouter, Switch, Redirect } from 'react-router-dom';\nimport queryString from 'query-string';\nimport PropTypes from 'prop-types';\nimport styles from './Reader.module.css';\n\nimport data from '../../assets/publications.json';\nimport Publication from './Publication/Publication';\nimport Counter from './Counter/Counter';\nimport Controls from './Controls/Controls';\n\nclass Reader extends Component {\n  state = { item: 1, publication: {} };\n\n  componentDidMount() {\n    const { location } = this.props;\n\n    const query = Number(queryString.parse(location.search).item);\n    this.checkValidItem(query);\n  }\n\n  componentDidUpdate(prevProps) {\n    const prevItem = Number(queryString.parse(prevProps.location.search).item);\n    const { location, history } = this.props;\n    const query = Number(queryString.parse(location.search).item);\n    if (location.pathname !== '/reader') {\n      return history.push({\n        search: `item=1`,\n        pathname: '/reader',\n      });\n    }\n    if (prevItem !== query) {\n      this.checkValidItem(query);\n    }\n\n    return query;\n  }\n\n  checkValidItem = query => {\n    if (query > 0 && query <= data.length) {\n      this.setState({\n        publication: data.find(publication => publication.item === query),\n        item: query,\n      });\n    } else {\n      const { location, history } = this.props;\n\n      history.replace({\n        ...location,\n        search: `item=1`,\n        pathname: '/reader',\n      });\n\n      this.setState({\n        publication: data.find(publication => publication.item === 1),\n        item: 1,\n      });\n    }\n  };\n\n  handleItemChange = e => {\n    const { location, history } = this.props;\n\n    const redirect = () => {\n      return history.push({\n        ...location,\n        search: `item=${this.state.item}`,\n        pathname: '/reader',\n      });\n    };\n\n    if (e.target.name === 'decrease') {\n      this.setState(prevState => ({ item: prevState.item - 1 }), redirect);\n    } else {\n      this.setState(prevState => ({ item: prevState.item + 1 }), redirect);\n    }\n  };\n\n  render() {\n    const { item, publication } = this.state;\n\n    return (\n      <div className={styles.reader}>\n        <Switch>\n          <Route\n            to={{\n              pathname: `/reader`,\n              search: `?item=${item}`,\n            }}\n            render={() => <Publication publication={publication} />}\n          />\n          <Redirect to=\"/reader\" />\n        </Switch>\n\n        <Counter currentPage={item} length={data.length} />\n        <Controls\n          currentPage={item}\n          length={data.length}\n          handlePage={this.handleItemChange}\n        />\n      </div>\n    );\n  }\n}\n\nReader.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n    search: PropTypes.string,\n  }).isRequired,\n  history: PropTypes.shape({\n    length: PropTypes.number.isRequired,\n    replace: PropTypes.func.isRequired,\n    push: PropTypes.func.isRequired,\n  }).isRequired,\n};\n\nexport default withRouter(Reader);\n","import React from 'react';\n\nimport Reader from '../Reader/Reader';\n\nconst App = () => <Reader />;\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter, Route } from 'react-router-dom';\nimport App from './components/App/index';\n\nReactDOM.render(\n  <HashRouter basename=\"/\">\n    <Route component={App} />\n  </HashRouter>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}